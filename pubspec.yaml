- name: Checkout
  uses: actions/checkout@v4

- name: Set up Flutter
  uses: subosito/flutter-action@v2
  with:
    flutter-version: '3.22.0'

- name: HARD CLEAN (NO CACHE)
  run: |
    flutter clean
    rm -rf ~/.gradle
    rm -rf android/.gradle
    rm -rf build
    rm -rf .dart_tool

- name: Get dependencies
  run: flutter pub get

- name: Build APK
  run: flutter build apk --release
